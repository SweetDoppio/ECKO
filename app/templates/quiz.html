{% extends 'base.html' %}

{% block title %}Cybersecurity Quiz{% endblock %}

{% block content %}


<h1>Cybersecurity Quiz</h1>
<div class="question-container" data-index="0" data-correct="b">
  <h2>1. What is the primary goal of a firewall?</h2>
  <input type="radio" name="q0" value="a"> <label>a) To increase internet speed</label><br>
  <input type="radio" name="q0" value="b"> <label>b) To monitor and control network traffic</label><br>
  <input type="radio" name="q0" value="c"> <label>c) To store data securely</label><br>
  <p class="feedback" id="feedback-q0"></p>
</div>

<div class="question-container" data-index="1" data-correct="b">
  <h2>2. Which of these is a common type of malware?</h2>
  <input type="radio" name="q1" value="a"> <label>a) Spreadsheet</label><br>
  <input type="radio" name="q1" value="b"> <label>b) Ransomware</label><br>
  <input type="radio" name="q1" value="c"> <label>c) Web browser</label><br>
  <p class="feedback" id="feedback-q1"></p>
</div>

<div class="question-container" data-index="2" data-correct="b">
  <h2>3. What does phishing aim to steal?</h2>
  <input type="radio" name="q2" value="a"> <label>a) Physical hardware</label><br>
  <input type="radio" name="q2" value="b"> <label>b) Personal information</label><br>
  <input type="radio" name="q2" value="c"> <label>c) Network cables</label><br>
  <p class="feedback" id="feedback-q2"></p>
</div>

<div class="question-container" data-index="3" data-correct="b">
  <h2>4. Which protocol is used to secure websites?</h2>
  <input type="radio" name="q3" value="a"> <label>a) HTTP</label><br>
  <input type="radio" name="q3" value="b"> <label>b) HTTPS</label><br>
  <input type="radio" name="q3" value="c"> <label>c) FTP</label><br>
  <p class="feedback" id="feedback-q3"></p>
</div>

<div class="question-container" data-index="4" data-correct="b">
  <h2>5. What is a key feature of two-factor authentication (2FA)?</h2>
  <input type="radio" name="q4" value="a"> <label>a) Single password</label><br>
  <input type="radio" name="q4" value="b"> <label>b) Two different authentication methods</label><br>
  <input type="radio" name="q4" value="c"> <label>c) No password required</label><br>
  <p class="feedback" id="feedback-q4"></p>
</div>

<div class="question-container" data-index="5" data-correct="a">
  <h2>6. Which of these is a common password attack?</h2>
  <input type="radio" name="q5" value="a"> <label>a) Brute force</label><br>
  <input type="radio" name="q5" value="b"> <label>b) Data backup</label><br>
  <input type="radio" name="q5" value="c"> <label>c) File compression</label><br>
  <p class="feedback" id="feedback-q5"></p>
</div>

<div class="question-container" data-index="6" data-correct="a">
  <h2>7. What does VPN stand for?</h2>
  <input type="radio" name="q6" value="a"> <label>a) Virtual Private Network</label><br>
  <input type="radio" name="q6" value="b"> <label>b) Very Public Network</label><br>
  <input type="radio" name="q6" value="c"> <label>c) Virtual Phone Network</label><br>
  <p class="feedback" id="feedback-q6"></p>
</div>

<div class="question-container" data-index="7" data-correct="b">
  <h2>8. Which of these is a physical security measure?</h2>
  <input type="radio" name="q7" value="a"> <label>a) Encryption</label><br>
  <input type="radio" name="q7" value="b"> <label>b) Locked doors</label><br>
  <input type="radio" name="q7" value="c"> <label>c) Antivirus software</label><br>
  <p class="feedback" id="feedback-q7"></p>
</div>

<div class="question-container" data-index="8" data-correct="b">
  <h2>9. What is the purpose of a DDoS attack?</h2>
  <input type="radio" name="q8" value="a"> <label>a) To encrypt data</label><br>
  <input type="radio" name="q8" value="b"> <label>b) To overwhelm a server with traffic</label><br>
  <input type="radio" name="q8" value="c"> <label>c) To improve website speed</label><br>
  <p class="feedback" id="feedback-q8"></p>
</div>

<div class="question-container" data-index="9" data-correct="a">
  <h2>10. Which of these is a secure file transfer protocol?</h2>
  <input type="radio" name="q9" value="a"> <label>a) SFTP</label><br>
  <input type="radio" name="q9" value="b"> <label>b) SMTP</label><br>
  <input type="radio" name="q9" value="c"> <label>c) HTTP</label><br>
  <p class="feedback" id="feedback-q9"></p>
</div>

<div class="question-container" data-index="10" data-correct="b">
  <h2>11. What does a zero-day exploit target?</h2>
  <input type="radio" name="q10" value="a"> <label>a) Known vulnerabilities</label><br>
  <input type="radio" name="q10" value="b"> <label>b) Unknown vulnerabilities</label><br>
  <input type="radio" name="q10" value="c"> <label>c) Hardware failures</label><br>
  <p class="feedback" id="feedback-q10"></p>
</div>

<div class="question-container" data-index="11" data-correct="a">
  <h2>12. Which of these is a type of encryption?</h2>
  <input type="radio" name="q11" value="a"> <label>a) AES</label><br>
  <input type="radio" name="q11" value="b"> <label>b) JPG</label><br>
  <input type="radio" name="q11" value="c"> <label>c) MP3</label><br>
  <p class="feedback" id="feedback-q11"></p>
</div>

<div class="question-container" data-index="12" data-correct="b">
  <h2>13. What is social engineering?</h2>
  <input type="radio" name="q12" value="a"> <label>a) Building secure networks</label><br>
  <input type="radio" name="q12" value="b"> <label>b) Manipulating people to gain information</label><br>
  <input type="radio" name="q12" value="c"> <label>c) Installing antivirus software</label><br>
  <p class="feedback" id="feedback-q12"></p>
</div>

<div class="question-container" data-index="13" data-correct="b">
  <h2>14. Which port is commonly used for HTTPS?</h2>
  <input type="radio" name="q13" value="a"> <label>a) 80</label><br>
  <input type="radio" name="q13" value="b"> <label>b) 443</label><br>
  <input type="radio" name="q13" value="c"> <label>c) 21</label><br>
  <p class="feedback" id="feedback-q13"></p>
</div>

<div class="question-container" data-index="14" data-correct="b">
  <h2>15. What is the purpose of a security patch?</h2>
  <input type="radio" name="q14" value="a"> <label>a) To add new features</label><br>
  <input type="radio" name="q14" value="b"> <label>b) To fix vulnerabilities</label><br>
  <input type="radio" name="q14" value="c"> <label>c) To increase processing speed</label><br>
  <p class="feedback" id="feedback-q14"></p>
</div>

<div class="nav-buttons">
  <button id="next-btn">Next</button>
  <button id="finish-btn" style="display: none;">Finish Quiz</button>
</div>

<div id="popup" class="popup">
  <button class="close-btn" onclick="closePopup()">Close</button>
  <div class="popup-content" id="popup-content"></div>
  <button id="retry-btn" style="display: inline-block; margin-top: 10px;" onclick="retryQuiz()">Retry Quiz</button>
</div>

<script>
  let currentQuestion = 0;
  const totalQuestions = 15;
  const correctAnswers = {
    q0: 'b', q1: 'b', q2: 'b', q3: 'b', q4: 'b',
    q5: 'a', q6: 'a', q7: 'b', q8: 'b', q9: 'a',
    q10: 'b', q11: 'a', q12: 'b', q13: 'b', q14: 'b'
  };

  function showQuestion(index) {
    document.querySelectorAll('.question-container').forEach(q => q.classList.remove('active'));
    const question = document.querySelector(`.question-container[data-index="${index}"]`);
    question.classList.add('active');
    if (index === totalQuestions - 1) {
      document.getElementById('next-btn').style.display = 'none';
      document.getElementById('finish-btn').style.display = 'inline-block';
    } else {
      document.getElementById('next-btn').style.display = 'inline-block';
      document.getElementById('finish-btn').style.display = 'none';
    }
    question.querySelector('input[type="radio"]').focus();
  }

  document.querySelectorAll('input[type="radio"]').forEach(radio => {
    radio.addEventListener('change', function() {
      const question = this.closest('.question-container');
      const correct = question.dataset.correct;
      const feedback = question.querySelector('.feedback');
      const selectedValue = this.value;

      if (selectedValue === correct) {
        feedback.textContent = 'Correct!';
        feedback.classList.remove('incorrect-answer');
        feedback.classList.add('correct-answer');
      } else {
        feedback.textContent = `Wrong! Correct answer is ${correct}.`;
        feedback.classList.remove('correct-answer');
        feedback.classList.add('incorrect-answer');
        question.classList.add('locked');
      }
    });
  });

  document.getElementById('next-btn').addEventListener('click', () => {
    if (currentQuestion < totalQuestions - 1) {
      currentQuestion++;
      showQuestion(currentQuestion);
    }
  });

  document.getElementById('finish-btn').addEventListener('click', () => {
    let correctCount = 0;
    document.querySelectorAll('.question-container').forEach(q => {
      const selected = q.querySelector('input[type="radio"]:checked');
      if (selected && selected.value === q.dataset.correct) {
        correctCount++;
      }
    });
    document.getElementById('popup-content').innerHTML = `<p>Your Score: ${correctCount}/${totalQuestions}</p>`;
    document.getElementById('popup').style.display = 'block';
    document.querySelector('.close-btn').focus();
  });

  function closePopup() {
    document.getElementById('popup').style.display = 'none';
    document.getElementById('next-btn').focus();
  }

  function retryQuiz() {
    // Reset all selections and feedback
    document.querySelectorAll('input[type="radio"]').forEach(radio => {
      radio.checked = false;
    });
    document.querySelectorAll('.question-container').forEach(q => {
      q.classList.remove('locked', 'active');
      q.querySelector('.feedback').textContent = '';
      q.querySelector('.feedback').classList.remove('correct-answer', 'incorrect-answer');
    });
    currentQuestion = 0;
    showQuestion(currentQuestion);
    document.getElementById('popup').style.display = 'none';
    document.getElementById('next-btn').focus();
  }

  // Start with the first question
  window.onload = function() {
    showQuestion(currentQuestion);
  };
</script>
{% endblock %}